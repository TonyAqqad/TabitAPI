{
  "info": {
    "name": "Tabit API Proxy - Complete Collection",
    "description": "Complete test collection for all Cloudflare Worker endpoints",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Health Check",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "https://api.khashokausa.info/health",
          "protocol": "https",
          "host": ["api", "khashokausa", "info"],
          "path": ["health"]
        },
        "description": "Check if worker is online"
      }
    },
    {
      "name": "Root Endpoint",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "https://api.khashokausa.info/",
          "protocol": "https",
          "host": ["api", "khashokausa", "info"],
          "path": [""]
        },
        "description": "Get list of available endpoints"
      }
    },
    {
      "name": "GHL Test Endpoint",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "https://api.khashokausa.info/ghl-test",
          "protocol": "https",
          "host": ["api", "khashokausa", "info"],
          "path": ["ghl-test"]
        },
        "description": "Test endpoint that returns {success: true} for GHL validation"
      }
    },
    {
      "name": "Get Full Catalog (with API Key)",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "https://api.khashokausa.info/catalog?api_key=wqiuefdy8y18e",
          "protocol": "https",
          "host": ["api", "khashokausa", "info"],
          "path": ["catalog"],
          "query": [
            {
              "key": "api_key",
              "value": "wqiuefdy8y18e",
              "description": "API Key as query parameter"
            }
          ]
        },
        "description": "Fetch complete menu catalog from Tabit (cached 10 minutes)"
      }
    },
    {
      "name": "Get Menu Summary (with API Key)",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "https://api.khashokausa.info/menu-summary?api_key=wqiuefdy8y18e",
          "protocol": "https",
          "host": ["api", "khashokausa", "info"],
          "path": ["menu-summary"],
          "query": [
            {
              "key": "api_key",
              "value": "wqiuefdy8y18e",
              "description": "Returns lightweight menu summary"
            }
          ]
        },
        "description": "Fetch condensed menu (~8KB instead of ~269KB)"
      }
    },
    {
      "name": "Submit Order via GHL Workflow",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"order_items\": \"Chicken Wings|Large|2|Mix+Ranch\",\n  \"order_type\": \"pickup\",\n  \"customer_name\": \"John Doe\",\n  \"customer_phone\": \"+1234567890\",\n  \"delivery_address\": \"\",\n  \"delivery_notes\": \"\"\n}"
        },
        "url": {
          "raw": "https://api.khashokausa.info/submit-order",
          "protocol": "https",
          "host": ["api", "khashokausa", "info"],
          "path": ["submit-order"]
        },
        "description": "NEW: Submit order from GHL Workflow (NO API KEY required). Returns {success, order_id, order_number, order_total}"
      }
    },
    {
      "name": "Submit Order (Legacy with API Key)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"ConsumerName\": \"Jane Smith\",\n  \"Phone\": \"+15551234567\",\n  \"OrderType\": \"takeaway\",\n  \"OrderNumber\": 12345,\n  \"ExtId\": \"test_order_001\",\n  \"Items\": [\n    {\n      \"id\": \"2361\",\n      \"name\": \"6 Chicken Wings\",\n      \"count\": 1,\n      \"options\": [\n        {\n          \"id\": \"68e7b82e893d90398a570415\",\n          \"name\": \"Serving/Prep\",\n          \"value_id\": \"68e7b82e893d90398a570417\",\n          \"value\": \"Mix\",\n          \"count\": 1\n        },\n        {\n          \"id\": \"68e7b82e893d articulated90a570419\",\n          \"name\": \"Dip\",\n          \"value_id\": \"68e7b82e893d90398a57041a\",\n          \"value\": \"Ranch Dip\",\n          \"count\": 1\n        }\n      ]\n    }\n  ]\n}"
        },
        "url": {
          "raw": "https://api.khashokausa.info/order?api_key=wqiuefdy8y18e",
          "protocol": "https",
          "host": ["api", "khashokausa", "info"],
          "path": ["order"],
          "query": [
            {
              "key": "api_key",
              "value": "wqiuefdy8y18e"
            }
          ]
        },
        "description": "Submit order with Tabit format (requires API key)"
      }
    },
    {
      "name": "Menu Update Webhook",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"type\": \"menu_update\",\n  \"timestamp\": \"2025-01-27T12:00:00Z\"\n}"
        },
        "url": {
          "raw": "https://api.khashokausa.info/webhooks/tabit/menu-update",
          "protocol": "https",
          "host": ["api", "khashokausa", "info"],
          "path": ["webhooks", "tabit", "menu-update"]
        },
        "description": "Invalidates menu cache (10 minute TTL reset)"
      }
    },
    {
      "name": "Order Status Webhook",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"order_id\": \"test_123\",\n  \"status\": \"SUCCESS\",\n  \"external_id\": \"ext_test_001\"\n}"
        },
        "url": {
          "raw": "https://api.khashokausa.info/webhooks/tabit/order-status",
          "protocol": "https",
          "host": ["api", "khashokausa", "info"],
          "path": ["webhooks", "tabit", "order-status"]
        },
        "description": "Receive order status updates from Tabit"
      }
    },
    {
      "name": "Test - No API Key (Should Fail)",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "https://api.khashokausa.info/catalog",
          "protocol": "https",
          "host": ["api", "khashokausa", "info"],
          "path": ["catalog"]
        },
        "description": "Test API key validation (should return 401)"
      }
    },
    {
      "name": "Test - Invalid API Key",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "https://api.khashokausa.info/catalog?api_key=invalid_key",
          "protocol": "https",
          "host": ["api", "khashokausa", "info"],
          "path": ["catalog"],
          "query": [
            {
              "key": "api_key",
              "value": "invalid_key"
            }
          ]
        },
        "description": "Test with invalid API key (should return 401)"
      }
    }
  ],
  "variable": [
    {
      "key": "base_url",
      "value": "https://api.khashokausa.info",
      "type": "string"
    },
    {
      "key": "api_key",
      "value": "wqiuefdy8y18e",
      "type": "string"
    }
  ]
}
